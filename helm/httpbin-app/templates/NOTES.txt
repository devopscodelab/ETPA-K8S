Thank you for installing {{ .Chart.Name }}!

Your release is named {{ .Release.Name }}.

To learn more about the release, try:

  $ helm status {{ .Release.Name }} -n {{ .Release.Namespace }}
  $ helm get all {{ .Release.Name }} -n {{ .Release.Namespace }}

Application deployed with the following configuration:

1. Deployment: {{ .Values.app.replicas }} replicas of {{ .Values.app.image.repository }}:{{ .Values.app.image.tag }}
2. Service: {{ .Values.service.type }} on port {{ .Values.service.port }}
3. Namespace: {{ .Values.namespace.name }}

{{- if .Values.ingress.external.enabled }}

External Ingress (Public Access):
  This creates an internet-facing Application Load Balancer for public endpoints.
  
  To get the external ALB DNS:
    kubectl get ingress {{ .Values.app.name }}-external -n {{ .Values.namespace.name }}
  
  Public endpoints:
  {{- range .Values.ingress.external.paths }}
    - {{ .path }}
  {{- end }}
  
  Once the ALB is provisioned (may take 2-5 minutes):
    EXTERNAL_ALB=$(kubectl get ingress {{ .Values.app.name }}-external -n {{ .Values.namespace.name }} -o jsonpath='{.status.loadBalancer.ingress[0].hostname}')
    curl http://$EXTERNAL_ALB/get
{{- end }}

{{- if .Values.ingress.internal.enabled }}

Internal Ingress (Private Access):
  This creates an internal Application Load Balancer for private endpoints.
  
  To get the internal ALB DNS:
    kubectl get ingress {{ .Values.app.name }}-internal -n {{ .Values.namespace.name }}
  
  Private endpoints (accessible only from within VPC):
  {{- range .Values.ingress.internal.paths }}
    - {{ .path }}
  {{- end }}
  
  To test from within the cluster:
    kubectl run test-pod --image=curlimages/curl -n {{ .Values.namespace.name }} --rm -it -- sh
    # Inside the pod:
    INTERNAL_ALB=$(kubectl get ingress {{ .Values.app.name }}-internal -n {{ .Values.namespace.name }} -o jsonpath='{.status.loadBalancer.ingress[0].hostname}')
    curl http://$INTERNAL_ALB/post -X POST -d '{"test":"data"}'
{{- end }}

Useful commands:
  - Check pods: kubectl get pods -n {{ .Values.namespace.name }}
  - Check service: kubectl get svc -n {{ .Values.namespace.name }}
  - Check ingresses: kubectl get ingress -n {{ .Values.namespace.name }}
  - View logs: kubectl logs -f deployment/{{ .Values.app.name }} -n {{ .Values.namespace.name }}
  - Describe pod: kubectl describe pod -l app={{ .Values.app.name }} -n {{ .Values.namespace.name }}
